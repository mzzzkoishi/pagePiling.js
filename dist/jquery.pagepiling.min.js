/*!
 * pagepiling.js 1.5.4
 *
 * https://github.com/alvarotrigo/pagePiling.js
 * @license MIT licensed
 *
 * Copyright (C) 2016 alvarotrigo.com - A project by Alvaro Trigo
 */
!function(e,n,t,o){"use strict";e.fn.pagepiling=function(i){function a(e){e.addClass("pp-table").wrapInner('<div class="pp-tableCell" style="height:100%" />')}function s(n){var t=e(".pp-section.active").index(".pp-section"),o=n.index(".pp-section");return t>o?"up":"down"}function c(n,t){var o={destination:n,animated:t,activeSection:e(".pp-section.active"),anchorLink:n.data("anchor"),sectionIndex:n.index(".pp-section"),toMove:n,yMovement:s(n),leavingSection:e(".pp-section.active").index(".pp-section")+1};if(!o.activeSection.is(n)){"undefined"==typeof o.animated&&(o.animated=!0),"undefined"!=typeof o.anchorLink&&f(o.anchorLink,o.sectionIndex),o.destination.addClass("active").siblings().removeClass("active"),o.sectionsToMove=p(o),"down"===o.yMovement?(o.translate3d=z(),o.scrolling="-100%",$.css3||o.sectionsToMove.each(function(n){n!=o.activeSection.index(".pp-section")&&e(this).css(u(o.scrolling))}),o.animateSection=o.activeSection):(o.translate3d="translate3d(0px, 0px, 0px)",o.scrolling="0",o.animateSection=n),e.isFunction($.onLeave)&&$.onLeave.call(this,o.leavingSection,o.sectionIndex+1,o.yMovement),r(o),W(o.anchorLink),O(o.anchorLink,o.sectionIndex),B=o.anchorLink;var i=(new Date).getTime();R=i}}function r(n){$.css3?(w(n.animateSection,n.translate3d,n.animated),n.sectionsToMove.each(function(){w(e(this),n.translate3d,n.animated)}),setTimeout(function(){l(n)},$.scrollingSpeed)):(n.scrollOptions=u(n.scrolling),n.animated?n.animateSection.animate(n.scrollOptions,$.scrollingSpeed,$.easing,function(){d(n),l(n)}):(n.animateSection.css(u(n.scrolling)),setTimeout(function(){d(n),l(n)},400)))}function l(n){e.isFunction($.afterLoad)&&$.afterLoad.call(this,n.anchorLink,n.sectionIndex+1)}function p(n){var t;return t="down"===n.yMovement?e(".pp-section").map(function(t){if(t<n.destination.index(".pp-section"))return e(this)}):e(".pp-section").map(function(t){if(t>n.destination.index(".pp-section"))return e(this)})}function d(n){"up"===n.yMovement&&n.sectionsToMove.each(function(t){e(this).css(u(n.scrolling))})}function u(e){return"vertical"===$.direction?{top:e}:{left:e}}function f(e,n){$.anchors.length?(location.hash=e,v(location.hash)):v(String(n))}function v(n){n=n.replace("#",""),e("body")[0].className=e("body")[0].className.replace(/\b\s?pp-viewing-[^\s]+\b/g,""),e("body").addClass("pp-viewing-"+n)}function h(){var o=t.location.hash.replace("#",""),i=o,a=e(n).find('.pp-section[data-anchor="'+i+'"]');a.length>0&&c(a,$.animateAnchor)}function m(){var e=(new Date).getTime();return e-R<Z+$.scrollingSpeed}function g(){var o=t.location.hash.replace("#","").split("/"),i=o[0];if(i.length&&i&&i!==B){var a;a=isNaN(i)?e(n).find('[data-anchor="'+i+'"]'):e(".pp-section").eq(i-1),c(a)}}function S(e){return{"-webkit-transform":e,"-moz-transform":e,"-ms-transform":e,transform:e}}function w(e,n,t){e.toggleClass("pp-easing",t),e.css(S(n))}function b(n){var o=(new Date).getTime();n=n||t.event;var i=n.wheelDelta||-n.deltaY||-n.detail,a=Math.max(-1,Math.min(1,i)),s="undefined"!=typeof n.wheelDeltaX||"undefined"!=typeof n.deltaX,c=Math.abs(n.wheelDeltaX)<Math.abs(n.wheelDelta)||Math.abs(n.deltaX)<Math.abs(n.deltaY)||!s;J.length>149&&J.shift(),J.push(Math.abs(i));var r=o-ee;if(ee=o,r>200&&(J=[]),!m()){var l=e(".pp-section.active"),p=T(l),d=y(J,10),u=y(J,70),f=d>=u;return f&&c&&(a<0?x("down",p):a>0&&x("up",p)),!1}}function y(e,n){for(var t=0,o=e.slice(Math.max(e.length-n,1)),i=0;i<o.length;i++)t+=o[i];return Math.ceil(t/n)}function x(e,n){var t,o;if("down"==e?(t="bottom",o=F.moveSectionDown):(t="top",o=F.moveSectionUp),n.length>0){if(!M(t,n))return!0;o()}else o()}function M(e,n){return"top"===e?!n.scrollTop():"bottom"===e?n.scrollTop()+1+n.innerHeight()>=n[0].scrollHeight:void 0}function T(e){return e.filter(".pp-scrollable")}function C(){Q.get(0).addEventListener?(Q.get(0).removeEventListener("mousewheel",b,!1),Q.get(0).removeEventListener("wheel",b,!1)):Q.get(0).detachEvent("onmousewheel",b)}function k(){Q.get(0).addEventListener?(Q.get(0).addEventListener("mousewheel",b,!1),Q.get(0).addEventListener("wheel",b,!1)):Q.get(0).attachEvent("onmousewheel",b)}function E(){if(j){var e=D();Q.off("touchstart "+e.down).on("touchstart "+e.down,X),Q.off("touchmove "+e.move).on("touchmove "+e.move,N)}}function L(){if(j){var e=D();Q.off("touchstart "+e.down),Q.off("touchmove "+e.move)}}function D(){var e;return e=t.PointerEvent?{down:"pointerdown",move:"pointermove",up:"pointerup"}:{down:"MSPointerDown",move:"MSPointerMove",up:"MSPointerUp"}}function A(e){var n=new Array;return n.y="undefined"!=typeof e.pageY&&(e.pageY||e.pageX)?e.pageY:e.touches[0].pageY,n.x="undefined"!=typeof e.pageX&&(e.pageY||e.pageX)?e.pageX:e.touches[0].pageX,n}function I(e){return"undefined"==typeof e.pointerType||"mouse"!=e.pointerType}function X(e){var n=e.originalEvent;if(I(n)){var t=A(n);H=t.y,K=t.x}}function N(n){var t=n.originalEvent;if(!P(n.target)&&I(t)){var o=e(".pp-section.active"),i=T(o);if(i.length||n.preventDefault(),!m()){var a=A(t);V=a.y,G=a.x,"horizontal"===$.direction&&Math.abs(K-G)>Math.abs(H-V)?Math.abs(K-G)>Q.width()/100*$.touchSensitivity&&(K>G?x("down",i):G>K&&x("up",i)):Math.abs(H-V)>Q.height()/100*$.touchSensitivity&&(H>V?x("down",i):V>H&&x("up",i))}}}function P(n,t){t=t||0;var o=e(n).parent();return!!(t<$.normalScrollElementTouchThreshold&&o.is($.normalScrollElements))||t!=$.normalScrollElementTouchThreshold&&P(o,++t)}function Y(){e("body").append('<div id="pp-nav"><ul></ul></div>');var n=e("#pp-nav");n.css("color",$.navigation.textColor),n.addClass($.navigation.position);for(var t=0;t<e(".pp-section").length;t++){var o="";if($.anchors.length&&(o=$.anchors[t]),"undefined"!==$.navigation.tooltips){var i=$.navigation.tooltips[t];"undefined"==typeof i&&(i="")}n.find("ul").append('<li data-tooltip="'+i+'"><a href="#'+o+'"><span></span></a></li>')}n.find("span").css("border-color",$.navigation.bulletsColor)}function O(n,t){$.navigation&&(e("#pp-nav").find(".active").removeClass("active"),n?e("#pp-nav").find('a[href="#'+n+'"]').addClass("active"):e("#pp-nav").find("li").eq(t).find("a").addClass("active"))}function W(n){$.menu&&(e($.menu).find(".active").removeClass("active"),e($.menu).find('[data-menuanchor="'+n+'"]').addClass("active"))}function q(){var e,i=n.createElement("p"),a={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};n.body.insertBefore(i,null);for(var s in a)i.style[s]!==o&&(i.style[s]="translate3d(1px,1px,1px)",e=t.getComputedStyle(i).getPropertyValue(a[s]));return n.body.removeChild(i),e!==o&&e.length>0&&"none"!==e}function z(){return"vertical"!==$.direction?"translate3d(-100%, 0px, 0px)":"translate3d(0px, -100%, 0px)"}function U(){Q.css({height:"",position:"","-ms-touch-action":"","touch-action":"",overflow:""}),ie.css({overflow:"",height:""}),e.each(ae.get(0).className.split(/\s+/),function(e,n){0===n.indexOf(ne)&&ae.removeClass(n)}),Q.find(se+", "+ce).each(function(){e(this).replaceWith(this.childNodes)}),ie.scrollTop(0),$.navigation&&e("#pp-nav").remove(),e(".pp-section").each(function(){e(this).removeAttr("style").removeAttr("data-anchor").removeClass("pp-section active pp-table pp-easing")})}var B,F=e.fn.pagepiling,Q=e(this),R=0,j="ontouchstart"in t||navigator.msMaxTouchPoints>0||navigator.maxTouchPoints,H=0,K=0,V=0,G=0,J=[],Z=600,$=e.extend(!0,{direction:"vertical",menu:null,verticalCentered:!0,sectionsColor:[],anchors:[],scrollingSpeed:700,easing:"easeInQuart",loopBottom:!1,loopTop:!1,css3:!0,navigation:{textColor:"#000",bulletsColor:"#000",position:"right",tooltips:[]},normalScrollElements:null,normalScrollElementTouchThreshold:5,touchSensitivity:5,keyboardScrolling:!0,sectionSelector:".section",animateAnchor:!1,afterLoad:null,onLeave:null,afterRender:null},i);e.extend(e.easing,{easeInQuart:function(e,n,t,o,i){return o*(n/=i)*n*n*n+t}}),F.setScrollingSpeed=function(e){$.scrollingSpeed=e},F.setMouseWheelScrolling=function(e){e?k():C()},F.setAllowScrolling=function(e){e?(F.setMouseWheelScrolling(!0),E()):(F.setMouseWheelScrolling(!1),L())},F.setKeyboardScrolling=function(e){$.keyboardScrolling=e},F.moveSectionUp=function(){var n=e(".pp-section.active").prevAll(".pp-section")[0];!n.length&&$.loopTop&&(n=e(".pp-section").last()),n.length&&c(n)},F.moveSectionDown=function(){var n=e(".pp-section.active").nextAll(".pp-section")[0];!n.length&&$.loopBottom&&(n=e(".pp-section").first()),n.length&&c(n)},F.moveTo=function(t){var o="";o=isNaN(t)?e(n).find('[data-anchor="'+t+'"]'):e(".pp-section").eq(t-1),o.length>0&&c(o)},e($.sectionSelector).each(function(){e(this).addClass("pp-section")}),$.css3&&($.css3=q()),e(Q).css({overflow:"hidden","-ms-touch-action":"none","touch-action":"none"}),F.setAllowScrolling(!0),e.isEmptyObject($.navigation)||Y();var _=e(".pp-section").length;e(".pp-section").each(function(n){e(this).data("data-index",n),e(this).css("z-index",_),n||0!==e(".pp-section.active").length||e(this).addClass("active"),"undefined"!=typeof $.anchors[n]&&e(this).attr("data-anchor",$.anchors[n]),"undefined"!=typeof $.sectionsColor[n]&&e(this).css("background-color",$.sectionsColor[n]),$.verticalCentered&&!e(this).hasClass("pp-scrollable")&&a(e(this)),_-=1}).promise().done(function(){$.navigation&&(e("#pp-nav").css("margin-top","-"+e("#pp-nav").height()/2+"px"),e("#pp-nav").find("li").eq(e(".pp-section.active").index(".pp-section")).find("a").addClass("active")),e(t).on("load",function(){h()}),e.isFunction($.afterRender)&&$.afterRender.call(this)}),e(t).on("hashchange",g),e(n).keydown(function(n){if($.keyboardScrolling&&!m())switch(n.which){case 38:case 33:F.moveSectionUp();break;case 40:case 34:F.moveSectionDown();break;case 36:F.moveTo(1);break;case 35:F.moveTo(e(".pp-section").length);break;case 37:F.moveSectionUp();break;case 39:F.moveSectionDown();break;default:return}}),$.normalScrollElements&&(e(n).on("mouseenter",$.normalScrollElements,function(){F.setMouseWheelScrolling(!1)}),e(n).on("mouseleave",$.normalScrollElements,function(){F.setMouseWheelScrolling(!0)}));var ee=(new Date).getTime();e(n).on("click touchstart","#pp-nav a",function(n){n.preventDefault();var t=e(this).parent().index();c(e(".pp-section").eq(t))}),e(n).on({mouseenter:function(){var n=e(this).data("tooltip");e('<div class="pp-tooltip '+$.navigation.position+'">'+n+"</div>").hide().appendTo(e(this)).fadeIn(200)},mouseleave:function(){e(this).find(".pp-tooltip").fadeOut(200,function(){e(this).remove()})}},"#pp-nav li");var ne="pp-viewing",te=e(t),oe=e(n),ie=e("html, body"),ae=e("body"),se=".pp-tableCell",ce=".pp-tableCell";F.destroy=function(e){F.setAllowScrolling(!1),F.setKeyboardScrolling(!1),f(""),L(),te.off("hashchange",g),oe.off("click touchstart","#pp-nav a").off("mouseenter","#pp-nav li").off("mouseleave","#pp-nav li").off("mouseover",$.normalScrollElements).off("mouseout",$.normalScrollElements),e&&U()}}}(jQuery,document,window);
//# sourceMappingURL=jquery.pagepiling.min.js.map
